<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Cliente - Corte Digital</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Shared CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared/visual-improvements.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared/modern-upgrade.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared/notifications.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared/proximos-agendamentos.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared/header-navbar.css') }}">
    <!-- Cliente CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/dashboard-nova.css') }}?v=12">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/agendamentos-tab.css') }}?v=12">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/cancel-modal.css') }}?v=12">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/novo-agendamento.css') }}?v=12">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/booking-form.css') }}?v=12">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cliente/calendar-picker.css') }}?v=12">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
<div id="dashboard-cliente" class="screen active">
        <!-- Header moderno -->
        <header class="header-modern">
            <div class="header-brand">
                <div class="header-brand-icon">
                    <i class="fas fa-scissors"></i>
                </div>
                <span>Corte Digital</span>
            </div>
            <div class="header-center" style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 1rem;">
                <button class="header-nav-btn" onclick="showSection('home-cliente')" title="Dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </button>
                <button class="header-nav-btn" onclick="showSection('agendamentos-cliente')" title="Agendamentos">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Agendamentos</span>
                </button>
                <button class="header-nav-btn" onclick="showSection('historico-cliente')" title="Hist√≥rico">
                    <i class="fas fa-history"></i>
                    <span>Hist√≥rico</span>
                </button>
            </div>
            <div class="header-actions">
                <button class="header-btn tooltip-modern" data-tooltip="Alternar Tema" onclick="toggleTheme()">
                    <i class="fas fa-moon" id="theme-icon"></i>
                </button>
                <button class="header-btn tooltip-modern" data-tooltip="Notifica√ß√µes" onclick="showNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count" style="display: none;">0</span>
                </button>
                <button class="header-btn tooltip-modern" data-tooltip="Perfil" onclick="showSection('perfil-cliente')">
                    <i class="fas fa-user-circle"></i>
                </button>
                <button class="header-btn tooltip-modern" data-tooltip="Sair" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </header>

        <!-- Layout principal sem sidebar -->
        <div class="app-layout" style="grid-template-columns: 1fr;">
            <!-- Conte√∫do principal -->
            <main class="app-main" style="max-width: 1400px; margin: 0 auto; width: 100%;">
                <!-- Dashboard Home -->
                <div id="home-cliente" class="content-section active">
                    
                    <!-- Hero Section -->
                    <div class="hero-section">
                        <div class="hero-content">
                            <h1 class="hero-greeting">Ol√°, {{ nome }}! üëã</h1>
                            <p class="hero-subtitle">Pronto para agendar seu pr√≥ximo corte?</p>
                            <button class="hero-cta" onclick="showSection('agendamentos-cliente'); setTimeout(() => switchTab('novo-agendamento'), 100);">
                                <i class="fas fa-calendar-plus"></i>
                                Agendar Novo Corte
                            </button>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card" onclick="showSection('agendamentos-cliente'); setTimeout(() => switchTab('meus-agendamentos'), 100);">
                            <div class="stat-header">
                                <div class="stat-icon blue">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-total">0</div>
                                <div class="stat-label">Agendamentos Ativos</div>
                            </div>
                        </div>

                        <div class="stat-card" onclick="showSection('historico-cliente')">
                            <div class="stat-header">
                                <div class="stat-icon green">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-concluidos">0</div>
                                <div class="stat-label">Cortes Realizados</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon orange">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-proximo">--</div>
                                <div class="stat-label">Pr√≥ximo Agendamento</div>
                            </div>
                        </div>
                    </div>

                    <!-- Pr√≥ximos Agendamentos -->
                    <div class="section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-calendar-alt"></i>
                                Pr√≥ximos Agendamentos
                            </h2>
                            <button class="section-action" onclick="showSection('agendamentos-cliente')">
                                Ver Todos
                            </button>
                        </div>
                        <div id="proximos-agendamentos-lista">
                            <!-- Loading skeleton -->
                            <div class="skeleton skeleton-card"></div>
                            <div class="skeleton skeleton-card"></div>
                        </div>
                    </div>

                </div>

                <!-- OLD DASHBOARD BACKUP -->
                <div id="home-cliente-old" class="content-section" style="display: none;">
                    <!-- Sauda√ß√£o e a√ß√£o principal -->
                    <div style="margin-bottom: 2.5rem;">
                        <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--color-text);">
                            Ol√°, {{ nome }}! üëã
                        </h1>
                        <p style="font-size: 1rem; color: var(--color-text-secondary); margin-bottom: 1.5rem;">
                            Pronto para agendar seu pr√≥ximo corte?
                        </p>
                        <button class="primary-action" onclick="showSection('agendamentos-cliente'); setTimeout(() => switchTab('novo-agendamento'), 100);">
                            <i class="fas fa-calendar-plus"></i>
                            Agendar Novo Corte
                        </button>
                    </div>

                    <!-- Cards de estat√≠sticas -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="font-size: 1.25rem; font-weight: 700; margin: 0; color: var(--color-text);">
                            Suas Estat√≠sticas
                        </h2>
                        <button onclick="refreshDashboardStats()" class="btn-refresh" title="Atualizar dados">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card-modern animate-fade-in-up" style="animation-delay: 0.1s; cursor: pointer;" onclick="showSection('agendamentos-cliente'); setTimeout(() => switchTab('meus-agendamentos'), 100);">
                            <div class="stat-icon-modern icon-gradient-blue">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-content-modern">
                                <div class="stat-number-modern" data-count="0"><span id="stat-ativos">0</span></div>
                                <div class="stat-label-modern">Agendamentos Ativos</div>
                            </div>
                            <div class="stat-card-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card-modern animate-fade-in-up" style="animation-delay: 0.2s;">
                            <div class="stat-icon-modern icon-gradient-purple">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content-modern">
                                <div class="stat-number-modern" style="font-size: 16px;"><span id="stat-proximo">--</span></div>
                                <div class="stat-label-modern">Pr√≥ximo Agendamento</div>
                            </div>
                        </div>

                        <div class="stat-card-modern animate-fade-in-up" style="animation-delay: 0.3s; cursor: pointer;" onclick="showSection('historico-cliente')">
                            <div class="stat-icon-modern icon-gradient-green">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content-modern">
                                <div class="stat-number-modern" data-count="0"><span id="stat-concluidos">0</span></div>
                                <div class="stat-label-modern">Servi√ßos Conclu√≠dos</div>
                            </div>
                            <div class="stat-card-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card-modern animate-fade-in-up" style="animation-delay: 0.4s;">
                            <div class="stat-icon-modern icon-gradient-orange">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="stat-content-modern">
                                <div class="stat-number-modern" style="font-size: 20px;"><span id="stat-gasto-mes">R$ 0,00</span></div>
                                <div class="stat-label-modern">Gasto no M√™s</div>
                            </div>
                        </div>
                    </div>

                    <!-- Pr√≥ximos agendamentos -->
                    <div class="upcoming-section" id="upcoming-appointments-section" style="display: none;">
                        <h2>
                            <i class="fas fa-calendar-day"></i>
                            Seus Pr√≥ximos Agendamentos
                        </h2>
                        <div id="upcoming-appointments-list"></div>
                    </div>

                    <!-- Acesso r√°pido -->
                    <div class="quick-actions">
                        <h2 class="section-title">
                            Acesso R√°pido
                        </h2>
                        <div class="actions-grid">
                            <button class="elegant-card btn-modern" onclick="showSection('agendamentos-cliente'); setTimeout(() => switchTab('meus-agendamentos'), 100);">
                                <div class="custom-icon icon-gradient-blue">
                                    <i class="fas fa-list"></i>
                                </div>
                                <div style="flex: 1;">
                                    <h3>Meus Agendamentos</h3>
                                    <p>Ver todos os agendamentos</p>
                                </div>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            
                            <button class="elegant-card btn-modern" onclick="showSection('historico-cliente')">
                                <div class="custom-icon icon-gradient-blue">
                                    <i class="fas fa-history"></i>
                                </div>
                                <div style="flex: 1;">
                                    <h3>Hist√≥rico</h3>
                                    <p>Servi√ßos anteriores</p>
                                </div>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            
                            <button class="elegant-card btn-modern" onclick="showSection('perfil-cliente')">
                                <div class="custom-icon icon-gradient-blue">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div style="flex: 1;">
                                    <h3>Meu Perfil</h3>
                                    <p>Editar informa√ß√µes</p>
                                </div>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                </div>
                
                <!-- Agendamentos com Abas -->
                <div id="agendamentos-cliente" class="content-section">
                    <div class="agendamentos-page-header">
                        <div class="agendamentos-page-title">
                            <i class="fas fa-calendar-alt"></i>
                            <h2>Agendamentos</h2>
                        </div>
                        <p class="agendamentos-page-subtitle">Gerencie seus agendamentos e agende novos cortes</p>
                    </div>

                    <!-- Abas -->
                    <div class="tabs-container">
                        <div class="tabs-header">
                            <button class="tab-btn active" onclick="switchTab('meus-agendamentos', event)">
                                <i class="fas fa-list"></i>
                                Meus Agendamentos
                            </button>
                            <button class="tab-btn" onclick="switchTab('novo-agendamento', event)">
                                <i class="fas fa-plus"></i>
                                Novo Agendamento
                            </button>
                        </div>

                        <!-- Conte√∫do das Abas -->
                        <div class="tabs-content">
                            <!-- Aba: Meus Agendamentos -->
                            <div id="meus-agendamentos" class="tab-panel active">
                                <div class="agendamentos-list" id="agendamentos-lista">
                                    <!-- Agendamentos ser√£o carregados via JS -->
                                </div>
                            </div>

                            <!-- Aba: Novo Agendamento -->
                            <div id="novo-agendamento" class="tab-panel">
                                <div class="booking-container">
                                    <!-- Indicador de progresso -->
                                    <div class="booking-progress">
                                        <div class="progress-line"></div>
                                        <div class="progress-step">
                                            <div class="progress-step-circle">1</div>
                                            <div class="progress-step-label">Servi√ßo</div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="progress-step-circle">2</div>
                                            <div class="progress-step-label">Barbeiro</div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="progress-step-circle">3</div>
                                            <div class="progress-step-label">Data/Hora</div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="progress-step-circle">4</div>
                                            <div class="progress-step-label">Confirmar</div>
                                        </div>
                                    </div>

                                    <!-- Etapa 1: Escolher Servi√ßo -->
                                    <div id="booking-step-1" class="booking-step active">
                                        <div class="booking-step-header">
                                            <h3 class="booking-step-title">Escolha o Servi√ßo</h3>
                                            <p class="booking-step-subtitle">Selecione o servi√ßo que deseja agendar</p>
                                        </div>
                                        <div class="services-grid" id="services-grid-new"></div>
                                    </div>

                                    <!-- Etapa 2: Escolher Barbeiro -->
                                    <div id="booking-step-2" class="booking-step">
                                        <div class="booking-step-header">
                                            <h3 class="booking-step-title">Escolha o Barbeiro</h3>
                                            <p class="booking-step-subtitle">Selecione o profissional de sua prefer√™ncia</p>
                                        </div>
                                        <div class="barbers-grid" id="barbers-grid-new"></div>
                                    </div>

                                    <!-- Etapa 3: Escolher Data e Hor√°rio -->
                                    <div id="booking-step-3" class="booking-step">
                                        <div class="booking-step-header">
                                            <h3 class="booking-step-title">Escolha Data e Hor√°rio</h3>
                                            <p class="booking-step-subtitle">Selecione o melhor dia e hor√°rio para voc√™</p>
                                        </div>
                                        <div class="calendar-container">
                                            <div class="calendar-header">
                                                <div class="calendar-title" id="calendar-title-new">Dezembro 2024</div>
                                                <div class="calendar-nav">
                                                    <button class="calendar-nav-btn" onclick="prevMonth()">
                                                        <i class="fas fa-chevron-left"></i>
                                                    </button>
                                                    <button class="calendar-nav-btn" onclick="nextMonth()">
                                                        <i class="fas fa-chevron-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="calendar-grid" id="calendar-grid-new"></div>
                                            <div class="time-slots" id="time-slots-new"></div>
                                        </div>
                                    </div>

                                    <!-- Etapa 4: Confirmar -->
                                    <div id="booking-step-4" class="booking-step">
                                        <div class="booking-step-header">
                                            <h3 class="booking-step-title">Confirmar Agendamento</h3>
                                            <p class="booking-step-subtitle">Revise os detalhes do seu agendamento</p>
                                        </div>
                                        <div class="booking-summary" id="booking-summary-new"></div>
                                    </div>

                                    <!-- Bot√µes de navega√ß√£o -->
                                    <div class="booking-actions">
                                        <button class="btn-booking btn-booking-back" onclick="prevBookingStep()" id="btn-booking-back">
                                            <i class="fas fa-arrow-left"></i>
                                            <span>Voltar</span>
                                        </button>
                                        <button class="btn-booking btn-booking-next" onclick="nextBookingStep()" id="btn-booking-next" disabled>
                                            <span>Pr√≥ximo</span>
                                            <i class="fas fa-arrow-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hist√≥rico Cliente -->
                <div id="historico-cliente" class="content-section">
                    <div class="section-header" style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px;">
                        <div class="custom-icon icon-gradient-purple" style="width: 40px; height: 40px; font-size: 20px;">
                            <i class="fas fa-history"></i>
                        </div>
                        <h2 style="margin: 0;">Hist√≥rico de Servi√ßos</h2>
                    </div>
                    <div class="historico-list" id="historico-lista">
                        <!-- Hist√≥rico ser√° carregado via JS -->
                    </div>
                </div>

                <!-- Perfil Cliente -->
                <div id="perfil-cliente" class="content-section">
                    <div class="section-header" style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px;">
                        <div class="custom-icon icon-gradient-orange" style="width: 40px; height: 40px; font-size: 20px;">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <h2 style="margin: 0;">Meu Perfil</h2>
                    </div>
                    <div class="profile-form">
                        <div class="profile-avatar">
                            <div class="profile-avatar-initials">
                                {{ nome[0] if nome else 'U' }}
                            </div>
                            <button class="btn-edit-avatar" type="button" title="Alterar foto">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        <form onsubmit="salvarPerfil(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Nome Completo</label>
                                    <input type="text" 
                                           name="name" 
                                           id="profile-name"
                                           class="form-control" 
                                           value="{{ nome }}"
                                           autocomplete="name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">E-mail</label>
                                    <input type="email" 
                                           name="email" 
                                           id="profile-email"
                                           class="form-control" 
                                           value="{{ session.get('usuario_email', '') }}"
                                           autocomplete="email">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Telefone</label>
                                    <input type="tel" 
                                           name="phone" 
                                           id="profile-phone" 
                                           class="form-control" 
                                           placeholder="(11) 99999-9999"
                                           autocomplete="tel">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Endere√ßo</label>
                                    <input type="text" 
                                           name="address" 
                                           id="profile-address" 
                                           class="form-control" 
                                           placeholder="Rua, n√∫mero, bairro"
                                           autocomplete="street-address">
                                </div>
                            </div>
                            <button type="submit" class="btn btn--primary">
                                <i class="fas fa-save"></i> Salvar Altera√ß√µes
                            </button>
                        </form>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Shared JS -->
    <script src="{{ url_for('static', filename='js/shared/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/shared/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/shared/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/shared/navigation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/shared/auth.js') }}"></script>
    <script src="{{ url_for('static', filename='js/shared/notifications.js') }}"></script>
    <script src="{{ url_for('static', filename='js/shared/micro-interactions.js') }}"></script>
    <!-- Cliente JS -->
    <script src="{{ url_for('static', filename='js/cliente/dashboard-nova.js') }}?v=8"></script>
    <script src="{{ url_for('static', filename='js/cliente/novo-agendamento.js') }}?v=8"></script>
    <!-- Main Index -->
    <script src="{{ url_for('static', filename='js/index.js') }}?v=8"></script>
</body>
</html>